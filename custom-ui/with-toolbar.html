<!DOCTYPE html>
<html lang="en">

<head>


  <title>Printess-Custom-Ui</title>

  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

  <!-- <link href="../bootstrap-themes/sketchy.css" rel="stylesheet"> -->

  <link type="text/css" rel="stylesheet" href="bs-layout.css" />

</head>

<body>

  <nav class="desktop-navbar navbar navbar-expand navbar-dark bg-primary">
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto" style="width: 100%;">
        <!--<li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">
            Ui
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="index.html">Printess Ui</a>
            <a class="dropdown-item" href="external.html">Custom Ui</a>
          </div>
        </li>-->
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnShowJson" title="Show Properties JSON" data-bs-toggle="offcanvas"
            data-bs-target="#templateOffcanvas">
            open
          </a>
        </li>
        <li class="nav-item" style="flex-grow: 1;"></li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnUndo" title="Undo">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
              class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
              <path
                d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnRedo" title="Redo">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
              class="bi bi-arrow-clockwise">
              <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z" />
              <path
                d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnSelect" title="Select Frame by Property-ID">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
              class="bi bi-bounding-box-circles" viewBox="0 0 16 16">
              <path
                d="M2 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM0 2a2 2 0 0 1 3.937-.5h8.126A2 2 0 1 1 14.5 3.937v8.126a2 2 0 1 1-2.437 2.437H3.937A2 2 0 1 1 1.5 12.063V3.937A2 2 0 0 1 0 2zm2.5 1.937v8.126c.703.18 1.256.734 1.437 1.437h8.126a2.004 2.004 0 0 1 1.437-1.437V3.937A2.004 2.004 0 0 1 12.063 2.5H3.937A2.004 2.004 0 0 1 2.5 3.937zM14 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zM2 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnClearSelection" title="Clear Selection">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-x-circle"
              viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
              <path
                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnHasEdits" title="Analyse if spread has Buyer Edits">
            e
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnDelete" title="Delete Selected Frames">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-trash"
              viewBox="0 0 16 16">
              <path
                d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
              <path fill-rule="evenodd"
                d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnShowJson" title="Show Properties JSON" data-bs-toggle="offcanvas"
            data-bs-target="#jsonOffcanvas">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-code"
              viewBox="0 0 16 16">
              <path
                d="M5.854 4.854a.5.5 0 1 0-.708-.708l-3.5 3.5a.5.5 0 0 0 0 .708l3.5 3.5a.5.5 0 0 0 .708-.708L2.707 8l3.147-3.146zm4.292 0a.5.5 0 0 1 .708-.708l3.5 3.5a.5.5 0 0 1 0 .708l-3.5 3.5a.5.5 0 0 1-.708-.708L13.293 8l-3.147-3.146z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnGetBuyerFrameCountAndMarkers" title="Get Buyer Frame Count And Markers"
            data-bs-toggle="offcanvas" data-bs-target="#frameCountOffcanvas">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 448 512">
              <!--! Font Awesome Pro 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
              <path
                d="M288 352h-48V144c0-5.906-3.25-11.31-8.453-14.09c-5.172-2.812-11.5-2.5-16.42 .7813l-48 32C159.8 167.6 157.8 177.5 162.7 184.9c4.875 7.344 14.8 9.312 22.19 4.438L208 173.9V352H160c-8.844 0-16 7.156-16 16S151.2 384 160 384h128c8.844 0 16-7.156 16-16S296.8 352 288 352zM384 32H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h320c35.35 0 64-28.65 64-64V96C448 60.65 419.3 32 384 32zM416 416c0 17.64-14.36 32-32 32H64c-17.64 0-32-14.36-32-32V96c0-17.64 14.36-32 32-32h320c17.64 0 32 14.36 32 32V416z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnGetPriceChangeCallbackInfos" title="Get Price Change Callback Infos"
            data-bs-toggle="offcanvas" data-bs-target="#frameCountOffcanvas">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 448 512">
              <!--! Font Awesome Pro 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
              <path
                d="M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM244.8 133.6C244.8 121.7 235.1 112 223.2 112C211.3 112 201.6 121.7 201.6 133.6V149.7C195.5 151.1 189.6 152.1 184.1 155.4C166.1 163.1 149.1 177.6 145.1 199.4C140.9 222.5 150.9 243.3 170.4 255.8C184.6 264.9 203.4 270.2 218.5 274.5C220.7 275.1 222.1 275.7 225.3 276.4C237.2 279.6 249.7 282.1 259.8 289.9C271.5 297.9 265.9 312.1 253.9 316.1C244.1 320.6 231.4 322.1 214.4 319.6C202.8 317.8 191.2 313.8 179.9 310C177.4 309.2 174.9 308.3 172.4 307.5C161.1 303.7 148.8 309.9 145.1 321.2C141.3 332.5 147.5 344.8 158.8 348.5C172.9 353.1 187.1 357.8 201.6 361L201.6 378.4C201.6 390.3 211.3 400 223.2 400C235.1 400 244.8 390.3 244.8 378.4L244.8 363.2C253.7 362.2 262.2 360.2 270 357C288.8 349.5 304.3 334.8 308.5 312.4C312.7 289.2 303.6 267.5 284.2 254.2C269.3 244 249.4 238.4 233.8 233.9C231.5 233.3 229.1 232.6 226.8 231.1C215.4 228.9 203.5 225.7 193.6 219.4C181.1 211.4 190.2 199.8 201.2 195C213.6 189.7 228.9 188.5 242.1 191C249.2 192.4 256.2 194.4 263.2 196.3C264.7 196.8 266.3 197.2 267.8 197.6C279.3 200.8 291.2 194.1 294.4 182.6C297.6 171.1 290.8 159.2 279.3 155.1C277.5 155.5 275.6 154.9 273.8 154.4C264.2 151.7 254.5 149 244.8 147.8L244.8 133.6z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnValidate" title="Show Validation JSON">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 576 512">
              <path fill="currentColor"
                d="M248.747 204.705l6.588 112c.373 6.343 5.626 11.295 11.979 11.295h41.37a12 12 0 0 0 11.979-11.295l6.588-112c.405-6.893-5.075-12.705-11.979-12.705h-54.547c-6.903 0-12.383 5.812-11.978 12.705zM330 384c0 23.196-18.804 42-42 42s-42-18.804-42-42 18.804-42 42-42 42 18.804 42 42zm-.423-360.015c-18.433-31.951-64.687-32.009-83.154 0L6.477 440.013C-11.945 471.946 11.118 512 48.054 512H527.94c36.865 0 60.035-39.993 41.577-71.987L329.577 23.985zM53.191 455.002L282.803 57.008c2.309-4.002 8.085-4.002 10.394 0l229.612 397.993c2.308 4-.579 8.998-5.197 8.998H58.388c-4.617.001-7.504-4.997-5.197-8.997z">
              </path>

            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnSave" title="Save Current Artwork">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
              class="bi bi-cloud-arrow-up-fill" viewBox="0 0 16 16">
              <path
                d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnLoad" title="Load Artwork by ID">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
              class="bi bi-cloud-arrow-down" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M7.646 10.854a.5.5 0 0 0 .708 0l2-2a.5.5 0 0 0-.708-.708L8.5 9.293V5.5a.5.5 0 0 0-1 0v3.793L6.354 8.146a.5.5 0 1 0-.708.708l2 2z" />
              <path
                d="M4.406 3.342A5.53 5.53 0 0 1 8 2c2.69 0 4.923 2 5.166 4.579C14.758 6.804 16 8.137 16 9.773 16 11.569 14.502 13 12.687 13H3.781C1.708 13 0 11.366 0 9.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383zm.653.757c-.757.653-1.153 1.44-1.153 2.056v.448l-.445.049C2.064 6.805 1 7.952 1 9.318 1 10.785 2.23 12 3.781 12h8.906C13.98 12 15 10.988 15 9.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 4.825 10.328 3 8 3a4.53 4.53 0 0 0-2.941 1.1z" />
            </svg>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" id="btnCenterInView" title="Center current spread in view">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 512" width="20" height="20" fill="currentColor">
              <path
                d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16z" />
            </svg>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="#" id="btnCenterSelectionInView" title="Center current frame in view">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 496 512">
              <path
                d="M242.16 240.67L27.98 301.55c-15.17 4.31-16.95 25.1-2.73 31.92l68.47 32.89-89.17 89.17c-6.07 6.06-6.07 15.9 0 21.96l21.96 21.96c6.07 6.06 15.9 6.06 21.96 0l89.17-89.17 32.89 68.47c6.83 14.22 27.61 12.44 31.92-2.73l60.87-214.18c3.68-12.91-8.25-24.83-21.16-21.17zm40.91 68.76l-20.79 73.13C326.16 375.37 376 321.8 376 256c0-70.69-57.31-128-128-128-65.8 0-119.38 49.84-126.56 113.72l73.13-20.78C206.02 203.54 225.66 192 248 192c35.29 0 64 28.71 64 64 0 22.34-11.54 41.98-28.93 53.43zM248 8C111.03 8 0 119.03 0 256c0 8.39.44 16.67 1.26 24.85 5.22-4.39 11.05-8.11 17.98-10.08l44.87-12.75c-.01-.68-.1-1.33-.1-2.01 0-101.69 82.29-184 184-184 101.69 0 184 82.29 184 184 0 101.69-82.29 184-184 184-.68 0-1.34-.09-2.01-.1l-12.75 44.87c-1.97 6.94-5.69 12.77-10.06 17.98 8.17.81 16.45 1.25 24.83 1.25 136.97 0 248-111.03 248-248S384.97 8 248 8z" />
            </svg>
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="#" id="btnRelaceText" title="Insert Text to Multi-Line Editor">
            Replace Text
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="btnPersistExchangeData" title="Persist exchange Data">
            Persist
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" id="btnInsertTemplateAsLayoutSnippet" title="Persist exchange Data">
            Insert Template
          </a>
        </li>



      </ul>

    </div>
  </nav>

  <button class="show-layouts-button btn btn-primary" type="button" data-bs-toggle="offcanvas"
    data-bs-target="#layoutOffcanvas" aria-controls="layoutOffcanvas">
    Change Layout
  </button>

  <div class="offcanvas offcanvas-start" data-bs-backdrop="false" tabindex="-1" id="layoutOffcanvas"
    aria-labelledby="offcanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasLabel">Layouts</h5>
      <button type="button" class="btn-close text-reset" id="closeLayoutOffCanvas" data-bs-dismiss="offcanvas"
        aria-label="Close"></button>
    </div>
    <div id="layoutSnippets" class="offcanvas-body">
    </div>
  </div>

  <!-- FOR TESTING ONLY: JSON DEBUG VIEW -->
  <div class="offcanvas offcanvas-start" data-bs-backdrop="false" tabindex="-1" id="jsonOffcanvas"
    aria-labelledby="offcanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasLabel">Properties JSON</h5>
      <button type="button" class="btn-close text-reset" id="closeJsonOffCanvas" data-bs-dismiss="offcanvas"
        aria-label="Close"></button>
    </div>
    <pre id="propertiesJson" class="offcanvas-body">
    </pre>
  </div>

  <!-- FOR TESTING ONLY: FRAME COUNT AND MARKERS VIEW -->
  <div class="offcanvas offcanvas-start" data-bs-backdrop="false" tabindex="-1" id="frameCountOffcanvas"
    aria-labelledby="offcanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasLabelInfo">Frame Count and Markers</h5>
      <button type="button" class="btn-close text-reset" id="closeFrameCountOffcanvas" data-bs-dismiss="offcanvas"
        aria-label="Close"></button>
    </div>
    <pre id="frameCountJson" class="offcanvas-body">
    </pre>
  </div>

  <!-- FOR TESTING ONLY: SELECT TEMPLATE VIEW-->
  <div class="offcanvas offcanvas-start" data-bs-backdrop="false" tabindex="-1" id="templateOffcanvas"
    aria-labelledby="offcanvasLabel">
    <div class="offcanvas-header" style="align-items: start;">
      <div class="offcanvas-title">
        <h5 id="offcanvasLabel">Load Template</h5>
        <p class="text-muted" id="offcanvasLabel">For mobile please add your own [backButtonCallback] as an
          attachPrintess parameter.</p>
      </div>
      <button type="button" class="btn-close text-reset" id="closeTemplateOffCanvas" data-bs-dismiss="offcanvas"
        aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <a class="dropdown-item" href="#Children%27s%20book">Children's book</a>
      <a class="dropdown-item" href="#Retro%20Sign">Retro Sign</a>
      <a class="dropdown-item" href="#Business%20Card">Business Card</a>
      <a class="dropdown-item" href="#Greeting%20Card">Greeting Card</a>
      <a class="dropdown-item" href="#Chocolate%20Bar">Chocolate Bar</a>
      <a class="dropdown-item" href="#Photo-Calendar%201">Photo-Calendar</a>
      <a class="dropdown-item" href="#Calendar">Calendar</a>
      <a class="dropdown-item" href="#Newborn%20Card">Newborn Card</a>
      <a class="dropdown-item" href="#Phone-Case">Phone-Case</a>
      <a class="dropdown-item" href="#Puzzle">Puzzle</a>
      <a class="dropdown-item" href="#T-shirt%202">T-Shirt</a>
      <a class="dropdown-item" href="#Photo%20Mug">Photo Mug</a>

      <div class="dropdown-divider">UI Test Templates</div>
      <a class="dropdown-item" href="#BuyerText-Eddi-P-or-Sel_draft">Rich Editing with Fallback to Paragraph</a>
      <a class="dropdown-item" href="#BuyerText-No-Eddi_draft">Form Editing with and without Paragraph Split</a>
      <a class="dropdown-item" href="#8Pages_draft">8 Pages</a>
      <a class="dropdown-item" href="#8DoublePages_draft">14 Facing Pages</a>
      <a class="dropdown-item" href="#8DoublePagesFF_draft">14 Facing Pages w. FormField</a>
      <a class="dropdown-item" href="#Avatar_draft">Avatar-Test</a>
      <a class="dropdown-item" href="#Newborn-Steps_draft">Newborn Card with Steps</a>
      <a class="dropdown-item" href="#sigTestPortrait_draft">Portrait Test Card</a>
      <a class="dropdown-item" href="#mff_draft">Form Field Test</a>
      <a class="dropdown-item" href="#mff_draft-2">Form Field Test 2</a>
      <a class="dropdown-item" href="#Photo-Calendar-Month-Pin">Calendar F1</a>
      <a class="dropdown-item" href="#Frame Count Test_draft">Frame Count Test</a>
      <a class="dropdown-item" href="#exchange-id-test-1">exchange-id-test-1</a>
      <a class="dropdown-item" href="#exchange-id-test-2">exchange-id-test-2</a>
      <a class="dropdown-item" href="#price-tester_draft">price-tester</a>
      <a class="dropdown-item" href="#doc-exchange-1_draft">doc exchange 1</a>
      <a class="dropdown-item" href="#doc-exchange-2_draft">doc exchange 2</a>
    </div>
  </div>

  <!-- position: absolute; height: initial; top: 60px; bottom: 0px; outline: 4px solid red; -->
  <!-- MAIN PRINTES UI-COMPONENTS -->
  <div id="printess-desktop-grid" style="top: 60px;">
    <nav id="desktop-pagebar"></nav>
    <div id="desktop-properties"></div>
    <div id="desktop-printess-container"></div>
  </div>


  <div class="token-warning">
    <h4>This site is using a test token. </h4>
    You will not be able to modify or print the template.
    Please contact us to get your personal token.
  </div>

  <!-- Bootstrap -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
    crossorigin="anonymous"></script>

  <!-- Load polyfills -->
  <script src="https://editor.printess.com/node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js"></script>

  <script src="uiHelper.js"></script>

  <!-- Load components via WebComponents.waitFor -->
  <script>

    let printess;
    let currentGroupSnippets = [];
    let currentLayoutSnippets = [];
    let currentTabs = [];

    window.WebComponents = window.WebComponents || {
      waitFor(cb) {
        addEventListener('WebComponentsReady', cb)
      }
    };


    const loadingDoneCallback = function (spreads, title) {
      // remove your progress overlay here
    }

    const spreadChangeCallback = (groupSnippets, layoutSnippets, tabs) => {

      //console.warn("Spread Change!");

      // remember groupSnippets for showing as add-able items
      currentGroupSnippets = groupSnippets;
      currentLayoutSnippets = layoutSnippets;
      currentTabs = tabs;

      document.querySelector(".show-layouts-button").style.visibility = layoutSnippets.length ? "visible" : "hidden";

    }

    const selectionChangeCallback = (properties, state) => {
      // state is "document" or "frames"

      //console.warn("Selection Change!");

      if (printess.isMobile()) {
        // **** add mobile-ui *****
        uiHelper.renderMobileUi(printess, properties, state, currentGroupSnippets, currentLayoutSnippets, currentTabs);
        uiHelper.renderMobileNavBar(printess);

      } else {
        // ***** add desktop-ui *****
        const t = uiHelper.renderDesktopUi(printess, properties, state, currentGroupSnippets, currentLayoutSnippets, currentTabs);
        uiHelper.refreshUndoRedoState(printess);

        // print json for debug purposes
        const jsonPre = document.getElementById("propertiesJson");
        if (jsonPre) {
          jsonPre.innerHTML = t.join("<br/>");
        }
      }

    }


    const getOverlayCallback = (properties) => {
      return uiHelper.getOverlay(printess, properties);
    }


    // Add a Printess token, you can get it on printess.com
    let token = "";

    if (!token) {
      token = "eyJhbGciOiJSUzI1NiIsImtpZCI6InByaW50ZXNzLXNhYXMtYWxwaGEiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJneTh6NDRFbUxpWjB2clVLclhsV3RpWlkxNUQyIiwianRpIjoibnl4NGJFZlZ5SVVvM1NkR2dYVnEtempzS3hlb0FYZUYiLCJyb2xlIjoic2hvcCIsIm5iZiI6MTYxODg2ODUxMSwiZXhwIjoxOTM0MjI4NTExLCJpYXQiOjE2MTg4Njg1MTEsImlzcyI6IlByaW50ZXNzIEdtYkggJiBDby5LRyIsImF1ZCI6InByaW50ZXNzLXNhYXMifQ.CuI6zdCzBm2y3t2GBD4pYdyztFzSeSEfdGIDBeiZIYvzQckB9oEB1Z4hDkBCGZGBtTMRyuHCbkwZgO6uxD-ZyahifiqrIqfqSqtFEGwgZUF87TvV_KlrYWBzDNTaUIQjr-yUoxLkdnEMzh-3D5qV8UKWIDfqwnYd0KhJiB2K9CSg82_etnz5Lk-altMDAT8b1AnzxcjRAJ9_b6-CAJFXG6AAnfdl7c_PS3sD-RPOkJ75Ta2glfikIiGZzfh09bn5Ptk7rucRdxUsLCLR6m5nUFpZbV77d2eqRw8pT4Kl-5by5gvMr1wUBGbEx751CNXtcCO3qk4uNnptfZ3yCpK0Z2FOo2CYLZBzmDiYCrdFV5U-_SZuVOEl8vk0uR3tj_PQci_R7MlQOjpB4NjlKckQ2zGvBSKNeupuiC71UZ2AT5BFlbqMsuYu0necIztyKiWsBmbniVlLe-v7_paP1N4nS2haD2n4s4N_CenJqijtPggWsITfoLm2twCOe7yNB5IH7bcEFv1-MbANuaFmJVLOcTfc89Zi-mkidaHV-n_9qXypzyB-ih_27YBNluRGwcHgTEkbJecSssMfvHSt1MUuqX-8gbl7bhFGryqHA2gMoSZNDW0LkSYig2K3poOUumD67vtYdNSPLhOmDK4ck9wLAKLOvk6dtywg2qfV-58_VbI";
      document.querySelector(".token-warning").style.display = "block";
    }



    window.WebComponents.waitFor(async () => {
      const printessLoader = await import('https://editor.printess.com/printess-editor/printess-editor.js');
      printess = await printessLoader.attachPrintess({
        resourcePath: "https://editor.printess.com/printess-editor", // relative or absolute path to where the printess-editor directory is. E.g. http://mydomain.com/library 

        div: document.getElementById("desktop-printess-container"),

        domain: "api.printess.com",
        token: token, // your printess shop-token
        basketId: "CurrentShopBasketId", // your shop  sessionId or baskedId
        shopUserId: "CurrentShopCustomerId", // optional the userId of your shop customer
        templateVersion: window.location.hash.substr(1).endsWith("_draft") ? "draft" : "published",
        templateName: decodeURIComponent(window.location.hash.substr(1).replace("_draft", "")) || "Greeting Card",

        loadingDoneCallback: loadingDoneCallback,
        selectionChangeCallback: selectionChangeCallback,
        spreadChangeCallback: spreadChangeCallback,
        getOverlayCallback: getOverlayCallback,
        refreshPaginationCallback: () => uiHelper.refreshPagination(printess),

        /* Optional: List of one or more templates to merge on load */
        /* mergeTemplates: [
          {
            "templateName": "Card-Title-2",
            "spreadIndex": 0  // Example to merge a card title to the first spread on load 
          },
          {
            "templateName": "Card-Back-2",
            "spreadIndex": 2  // Example to merge a card back to the third spread on load 
          }
        ], */
      });

      // listen to visual viewport changes to detect virtual keyboard on iOs and Android
      if (window.visualViewport) {
        window.visualViewport.addEventListener("scroll", () => uiHelper.viewPortScroll(printess)); // safari
        window.visualViewport.addEventListener("resize", () => uiHelper.viewPortResize(printess)); // android
      } else {
        window.addEventListener("resize", () => uiHelper.resize(printess));
      }
    });


    document.getElementById("btnUndo").onclick = () => {
      printess.undo();
      selectionChangeCallback([]);
    };
    document.getElementById("btnRedo").onclick = () => {
      printess.redo();
      selectionChangeCallback([]);
    };

    document.getElementById("btnSelect").onclick = () => {
      const id = prompt("Select Frames by propertyId:");
      if (id) {
        printess.selectFrames(id);
      }
    };

    document.getElementById("btnClearSelection").onclick = () => {
      printess.resizePrintess();
      printess.clearSelection();
    };
    document.getElementById("btnHasEdits").onclick = () => {
      alert(printess.hasBuyerContentEdits(""));
    };
    document.getElementById("btnDelete").onclick = () => {
      printess.deleteSelectedFrames();
    };
    document.getElementById("btnValidate").onclick = () => {
      alert(JSON.stringify(printess.getAllRequiredPropertiesSync()));
    };

    document.getElementById("btnSave").onclick = () => {
      printess.save().then(id => {
        navigator.clipboard.writeText(id).then(function () {
          /* clipboard successfully set */
          prompt("Saved Artwork and copied ID to clipboard:", id);
        }, function () {
          alert("Copy failed!");
        });
      })

    };
    document.getElementById("btnLoad").onclick = () => {
      navigator.clipboard.readText().then(
        clipText => {
          const newId = prompt("Load Saved Artwork by ID:", clipText);
          if (newId) printess.load(newId);
        });
    };
    document.getElementById("btnRelaceText").onclick = () => {
      printess.setEditorText("Hallo du doofer Computer");
    };
    document.getElementById("btnPersistExchangeData").onclick = () => {
      printess.persistExchangeState();
    };
    document.getElementById("btnInsertTemplateAsLayoutSnippet").onclick = () => {
      printess.insertTemplateAsLayoutSnippet("Text Sticker", "draft", "Sticker Square 1", "layout");
    };
    document.getElementById("btnCenterInView").onclick = () => {
      printess.centerSpreadInView();
    };
    document.getElementById("btnCenterSelectionInView").onclick = () => {
      printess.centerSelection(undefined, "frame");
    };
    document.getElementById("btnGetBuyerFrameCountAndMarkers").onclick = () => {
      // print frame count and markers for debug purposes
      const frameCountPre = document.getElementById("frameCountJson");
      document.getElementById("offcanvasLabelInfo").innerText = "Frame Count and Markers"
      const frameCountAndMarkers = printess.getBuyerFrameCountAndMarkers();

      if (frameCountPre && frameCountAndMarkers) {
        frameCountPre.innerHTML = frameCountAndMarkers.map(obj => JSON.stringify(obj, null, 4));
      }
      frameCountAndMarkers.forEach(f => console.log("Document Name: ", f.documentName, "\nFrames: ", f.frames, "\nSpreads: ", f.spreads));
    };
    document.getElementById("btnGetPriceChangeCallbackInfos").onclick = () => {
      // print frame count and markers for debug purposes
      const frameCountPre = document.getElementById("frameCountJson");
      document.getElementById("offcanvasLabelInfo").innerText = "Price Change Callback Data"
      const priceInfos = printess.getPriceRelevantData();

      if (frameCountPre && priceInfos) {
        frameCountPre.innerHTML = JSON.stringify(priceInfos, null, 4);
      }

    };

    window.addEventListener('hashchange', async function () {
      let id = decodeURIComponent(window.location.hash.substr(1));
      let loadPublishedVersion = true;
      if (id.endsWith("_draft")) {
        id = id.replace("_draft", "");
        loadPublishedVersion = false;
      }
      const offcanvas = document.getElementById("templateOffcanvas");
      if (offcanvas) offcanvas.style.visibility = "";
      let pagebar = document.querySelector(".mobile-pagebar");
      if (pagebar) pagebar.parentElement.removeChild(pagebar); // will be re-attached on load callback
      if (id && printess) {
        printess.loadTemplate(id, undefined, true);
      }
    }, false);



  </script>

</body>

</html>