<!DOCTYPE html>
<html lang="en" >

<head>

  <title>Printess iFrame Example</title>

  <meta charset="utf-8">

  <!--Please always add the correct viewport to ensure Printess works fine on mobile devices-->
  <meta name="viewport" content="width=device-width">

  <style>
    /* Counter act the Safari viewport-height bug */
    html {
      height: -webkit-fill-available;
    }

    body {
      margin: 0; 
      padding: 0; 
      height: 100vh; 
      height: -webkit-fill-available;
    }
    iframe {
      width: 100vw; 
      height: 100%; 
      border: none; 
      display: block; 
      position: fixed;

    }
  </style>

</head>

<body">


  <iframe  id="printess" src="embed.html"></iframe>

  <script>
    const iframe = document.getElementById("printess");
    iframe.onload = () => {

      /* **************************** */
      /* listen to printess callbacks */
      /* **************************** */
      window.addEventListener("message", () => {
        switch (event.data.cmd) {
          case "back":
            alert("Back to catalog. save-token:" + event.data.token);
            break;
          case "basket":
            prompt("Proceed to checkout.\n\nsave-token:\n" + event.data.token +  "\n\nThumbnailUrl:",event.data.thumbnailUrl );
            break;
        }
      });

      /* *************************** */
      /*    load Printess editor     */
      /* *************************** */
      iframe.contentWindow.postMessage({
        cmd: "attach", properties: {
          templateName:"Greeting Card", // name of the template to load. You can also pass a save-token here. 
          //cssUrl: window.location.origin + "/sketchy.css"
        }
      }, "*");
    }

  </script>

</body>

</html>